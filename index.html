<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML5 Image Plugin</title>
    <script src="dimage.js"></script>
    <script>
    window.onload = function() {
        document.querySelector('.file').addEventListener('change', function (e) {
            var file = e.target.files[0];
            DImage.create(file, true, function (me) {
                var blob = me.resize().rotate().getAsBlob();
                var base64 = me.getAsBase64();

                console.log(blob);

                document.querySelector('img').setAttribute('src', base64);
            });
        }, false);

    }
    </script>
    <style>
        .container {
            width:300px;
            height: 200px;
            margin: 100px auto;
            border: 1px solid gray;
        }
        input {margin: 100px auto; display: block; }
    </style>
</head>
<body>
    <div class="container"><img style="width: 100%; height: 100%;" /></div>
    <input class="file" type="file" />
</body>
</html>